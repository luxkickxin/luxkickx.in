<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LuxKickx.in | Streetwear Cool Sneakers</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: #0f0f0f;
      color: white;
      text-align: center;
      min-height: 100vh;
    }
    header {
      background: #111;
      padding: 15px 0;
      font-size: 1.8em;
      font-weight: bold;
      color: #fff;
      letter-spacing: 1px;
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .product {
      background: #1b1b1b;
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
      transition: 0.3s;
    }
    .product:hover {
      transform: scale(1.03);
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
    }
    .product img {
      width: 100%;
      border-radius: 10px;
      height: 200px;
      object-fit: cover;
    }
    button {
      background: #ff3131;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1em;
      margin-top: 10px;
      transition: 0.3s;
    }
    button:hover {
      background: #ff4f4f;
    }
    #adminPanel {
      display: none;
      background: #111;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
      margin: 20px auto;
    }
    input {
      width: 90%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: none;
    }
    #loginButton {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ff3131;
      color: white;
      border: none;
      padding: 12px 18px;
      border-radius: 30px;
      font-size: 1em;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
      transition: 0.3s;
      z-index: 999;
    }
    #loginButton:hover { background: #ff4f4f; }
    #loginBox {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: #1a1a1a;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
      z-index: 1000;
    }
    #loginBox input { width: 100%; margin-bottom: 10px; }

    /* Floating Custom Button */
    #customButton {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: linear-gradient(90deg,#00ff7f,#00ffaa);
      color: #000;
      border: none;
      padding: 12px 18px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(0,255,127,0.5);
      transition: 0.3s;
      z-index: 998;
      display: none;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 10px rgba(0,255,127,0.3); }
      50% { box-shadow: 0 0 25px rgba(0,255,127,0.7); }
      100% { box-shadow: 0 0 10px rgba(0,255,127,0.3); }
    }

    .whatsapp-box {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a1a;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(255,255,255,0.2);
      display: none;
      z-index: 1001;
    }
    .whatsapp-box button {
      display: block;
      width: 100%;
      margin: 10px 0;
      background: #25d366;
      color: #fff;
    }
    .close-btn {
      background: #ff3131;
      color: white;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>LuxKickx.in</header>

  <!-- Admin Login -->
  <button id="loginButton" onclick="toggleLoginBox()">Admin</button>
  <div id="loginBox">
    <input type="password" id="adminPass" placeholder="Enter Password" />
    <button onclick="checkPassword()">Login</button>
  </div>

  <!-- Admin Panel -->
  <div id="adminPanel">
    <h3>🧠 Admin Panel</h3>
    <input type="text" id="name" placeholder="Product Name" /><br />
    <input type="text" id="price" placeholder="Price (₹)" /><br />
    <input type="text" id="imgUrl" placeholder="Image URL" /><br />
    <button onclick="addProduct()">Add Product</button>

    <hr style="margin:15px 0; border-color:#333;">
    <h4>📞 WhatsApp Numbers</h4>
    <input type="text" id="whatsapp1" placeholder="WhatsApp 1" /><br />
    <input type="text" id="whatsapp2" placeholder="WhatsApp 2" /><br />
    <button onclick="saveWhatsApp()">Save Numbers</button>

    <hr style="margin:15px 0; border-color:#333;">
    <h4>🎯 Floating Button</h4>
    <input type="text" id="btnName" placeholder="Button Text" /><br />
    <input type="text" id="btnLink" placeholder="Button Link" /><br />
    <button onclick="saveButton()">Save Button</button>
    <button style="background:#444;" onclick="removeButton()">Remove Button</button>
  </div>

  <!-- Floating Button -->
  <button id="customButton">🎡 Spin & Win</button>

  <!-- WhatsApp Selection Box -->
  <div class="whatsapp-box" id="whatsappBox">
    <h3>📩 Choose a Seller</h3>
    <button id="chat1">Seller 1</button>
    <button id="chat2">Seller 2</button>
    <button class="close-btn" onclick="closeWhatsAppBox()">Close</button>
  </div>

  <div class="product-grid" id="productGrid"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, push, onValue, remove, set, update } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDEb5rU6umecMHMd5aEO6G41aTzH6BWG18",
    authDomain: "luxkickx-f4f03.firebaseapp.com",
    databaseURL: "https://luxkickx-f4f03-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "luxkickx-f4f03",
    storageBucket: "luxkickx-f4f03.firebasestorage.app",
    messagingSenderId: "554109408927",
    appId: "1:554109408927:web:7b034875717703c262f4aa"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const adminPassword = "QwEr12@#";
  let isAdmin = false;
  let whatsapp1 = "";
  let whatsapp2 = "";

  window.toggleLoginBox = function () {
    const box = document.getElementById("loginBox");
    box.style.display = box.style.display === "block" ? "none" : "block";
  };

  window.checkPassword = function () {
    const pass = document.getElementById("adminPass").value;
    if (pass === adminPassword) {
      isAdmin = true;
      document.getElementById("loginButton").style.display = "none";
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("adminPanel").style.display = "block";
    } else {
      alert("❌ Wrong password!");
    }
  };

  window.addProduct = async function () {
    const name = document.getElementById("name").value.trim();
    const price = document.getElementById("price").value.trim();
    const imgUrl = document.getElementById("imgUrl").value.trim();
    if (!name || !price || !imgUrl) return alert("Please fill all fields!");
    await push(ref(db, "products"), { name, price, img: imgUrl });
    alert("✅ Product added!");
  };

  window.saveWhatsApp = async function () {
    const w1 = document.getElementById("whatsapp1").value.trim();
    const w2 = document.getElementById("whatsapp2").value.trim();
    if (!w1 || !w2) return alert("Enter both numbers!");
    await set(ref(db, "whatsapp"), { w1, w2 });
    alert("✅ Numbers saved!");
  };

  window.saveButton = async function () {
    const name = document.getElementById("btnName").value.trim();
    const link = document.getElementById("btnLink").value.trim();
    if (!name || !link) return alert("Fill both fields!");
    await set(ref(db, "customButton"), { name, link });
    alert("✅ Button saved!");
  };

  window.removeButton = async function () {
    await remove(ref(db, "customButton"));
    alert("🗑️ Floating button removed!");
  };

  onValue(ref(db, "customButton"), (snapshot) => {
    const data = snapshot.val();
    const btn = document.getElementById("customButton");
    if (data && data.name && data.link) {
      btn.innerText = data.name;
      btn.style.display = "block";
      btn.onclick = () => window.open(data.link, "_blank");
      document.getElementById("btnName").value = data.name;
      document.getElementById("btnLink").value = data.link;
    } else {
      btn.style.display = "none";
    }
  });

  onValue(ref(db, "whatsapp"), (snapshot) => {
    const data = snapshot.val();
    if (data) {
      whatsapp1 = data.w1;
      whatsapp2 = data.w2;
      document.getElementById("whatsapp1").value = data.w1;
      document.getElementById("whatsapp2").value = data.w2;
    }
  });

  const grid = document.getElementById("productGrid");
  onValue(ref(db, "products"), (snapshot) => {
    grid.innerHTML = "";
    snapshot.forEach((child) => {
      const p = child.val();
      const id = child.key;
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <img src="${p.img}" alt="${p.name}" />
        <h3>${p.name}</h3>
        <p>₹${p.price}</p>
        <button onclick="showWhatsAppBox('${p.name}','${p.price}')">Buy Now</button>
        ${
          isAdmin
            ? `<button onclick="editProduct('${id}','${p.name}','${p.price}','${p.img}')">Edit</button>
               <button onclick="deleteProduct('${id}')">Delete</button>`
            : ""
        }
      `;
      grid.appendChild(div);
    });
  });

  window.editProduct = function (id, name, price, img) {
    const div = [...document.querySelectorAll(".product")].find(d =>
      d.innerHTML.includes(`deleteProduct('${id}')`)
    );
    if (!div) return;
    div.innerHTML = `
      <input type="text" id="editName" value="${name}" placeholder="Product Name" /><br>
      <input type="text" id="editPrice" value="${price}" placeholder="Price" /><br>
      <input type="text" id="editImg" value="${img}" placeholder="Image URL" /><br>
      <button onclick="saveEdit('${id}')">Save</button>
      <button onclick="cancelEdit()">Cancel</button>
    `;
  };

  window.saveEdit = async function (id) {
    const name = document.getElementById("editName").value.trim();
    const price = document.getElementById("editPrice").value.trim();
    const img = document.getElementById("editImg").value.trim();
    if (!name || !price || !img) return alert("Please fill all fields!");
    await update(ref(db, "products/" + id), { name, price, img });
    alert("✅ Product updated!");
  };

  window.cancelEdit = function () {
    location.reload();
  };

  window.showWhatsAppBox = function (name, price) {
    const box = document.getElementById("whatsappBox");
    const msg = `Hi! I'm interested in ${name} (₹${price})`;
    document.getElementById("chat1").onclick = () => window.open(`https://wa.me/${whatsapp1}?text=${encodeURIComponent(msg)}`, "_blank");
    document.getElementById("chat2").onclick = () => window.open(`https://wa.me/${whatsapp2}?text=${encodeURIComponent(msg)}`, "_blank");
    box.style.display = "block";
  };

  window.closeWhatsAppBox = function () {
    document.getElementById("whatsappBox").style.display = "none";
  };

  window.deleteProduct = async function (id) {
    if (!isAdmin) return;
    await remove(ref(db, "products/" + id));
    alert("🗑️ Product deleted!");
  };
</script>

</body>
</html>

